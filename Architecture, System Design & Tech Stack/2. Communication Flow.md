
# ğŸ”— Communication Flow Between Components â€“ Distributed Task Scheduler

---

## ğŸ”„ Component-wise Communication Flow

### âœ… 1. Client â†” API Service
- **Protocol:** HTTP REST (secured with JWT)
- **Direction:** Bidirectional
- **Flow:**
  - `POST /tasks` to submit new jobs
  - `GET /tasks/{id}` to check job status

---

### âœ… 2. API Service â†’ PostgreSQL
- **Protocol:** JDBC (synchronous)
- **Direction:** Unidirectional
- **Flow:**
  - Stores task metadata (ID, payload, status, timestamps, retry info)
  - Tracks DAG relationships if applicable

---

### âœ… 3. API Service â†’ Redis
- **Protocol:** Redis Commands (ZADD, SET)
- **Direction:** Unidirectional
- **Flow:**
  - Queues jobs with delay and priority
  - Sets expiration and leasing keys

---

### âœ… 4. Worker Pool â†’ Redis
- **Protocol:** Redis Polling & Locks
- **Direction:** Bidirectional
- **Flow:**
  - Polls for ready tasks based on time and priority
  - Uses distributed lock (`SETNX`) to lease task
  - Re-queues on retry

---

### âœ… 5. Worker Pool â†” PostgreSQL
- **Protocol:** JDBC
- **Direction:** Bidirectional
- **Flow:**
  - Reads job status, dependencies
  - Updates job outcome: SUCCESS or FAILED

---

### âœ… 6. Worker Pool â†’ Kafka / RabbitMQ (DLQ)
- **Protocol:** Kafka Producer
- **Direction:** Unidirectional
- **Flow:**
  - Failed tasks after retries pushed to DLQ

---

### âœ… 7. Notifier Service â†’ Email / Webhook
- **Protocol:** SMTP or HTTP Client
- **Direction:** Unidirectional
- **Flow:**
  - On job complete/failure, sends user alert via email or webhook

---

### âœ… 8. Prometheus â†” API / Workers
- **Protocol:** HTTP Metrics Scraping
- **Direction:** Pull (Prometheus initiates)
- **Flow:**
  - Prometheus scrapes `/actuator/prometheus` for real-time metrics

---

### âœ… 9. Grafana â†” Prometheus
- **Protocol:** PromQL / HTTP
- **Direction:** Pull
- **Flow:**
  - Dashboards visualize metrics like queue size, retry count, etc.

---

### âœ… 10. Config Server â†’ Services
- **Protocol:** YAML files or AWS SSM API
- **Direction:** Unidirectional
- **Flow:**
  - Loads retry settings, concurrency limits, notification config

---

### âœ… 11. GitHub Actions â†’ Docker + Kubernetes
- **Protocol:** GitHub CI/CD Workflow
- **Direction:** Unidirectional
- **Flow:**
  - Runs build/test pipeline
  - Builds Docker images, pushes to registry
  - Deploys to K8s using YAML specs

---

## ğŸ“Š Summary Flow (Text Representation)

```
[Client] â†’ [API Service] â†” [PostgreSQL]
                 â†“
               [Redis Queue]
                 â†“â†‘
         [Worker Pool / Executors]
         â†” [PostgreSQL]
         â†’ [Kafka DLQ]
         â†’ [Notifier Service] â†’ [Email/Webhook]

[Prometheus] â† [API + Workers] â†’ [Grafana]
[Config Server] â†’ [All Services]
[GitHub Actions] â†’ [Docker â†’ Kubernetes]
```
