

## âœ… Distributed Task Scheduler â€“ API Contracts

---

### ðŸ”¹ 1. **Submit a Task**

**POST** `/tasks`

#### ðŸ”¸ Request Body (JSON)

```json
{
  "name": "SendInvoice",
  "payload": {
    "customerId": "123",
    "amount": 450
  },
  "priority": 5,
  "delaySeconds": 0,
  "dependencies": ["task-id-1", "task-id-2"],
  "maxRetries": 3,
  "idempotencyKey": "unique-key-123",
  "notificationUrl": "https://example.com/webhook",
  "notificationEmail": "notify@example.com",
  "tenantId": "default"
}
```

#### ðŸ”¸ Response (200 OK)

```json
{
  "id": "generated-task-id",
  "status": "PENDING",
  "message": "âœ… Task created successfully"
}
```

---

### ðŸ”¹ 2. **Get Task Status**

**GET** `/tasks/{id}`

#### ðŸ”¸ Path Parameter

* `id`: Task ID

#### ðŸ”¸ Response (200 OK)

```json
{
  "id": "task-id-abc",
  "name": "SendInvoice",
  "status": "COMPLETED",
  "retryCount": 1,
  "maxRetries": 3,
  "executionLogs": [
    "Task started at 2025-05-27T07:00:00",
    "Task completed successfully"
  ],
  "payload": { ... },
  "tenantId": "default"
}
```

---

### ðŸ”¹ 3. **Add Dependencies by Name**

**POST** `/tasks/{taskName}/dependencies`

#### ðŸ”¸ Path Parameter

* `taskName`: Name of the task to add dependencies to

#### ðŸ”¸ Body (JSON)

```json
{
  "dependsOn": ["DependencyTaskA", "DependencyTaskB"],
  "tenantId": "default"
}
```

#### ðŸ”¸ Response

```json
{
  "message": "âœ… Dependencies added successfully."
}
```

---

### ðŸ”¹ 4. **Health Check**

**GET** `/health`

#### ðŸ”¸ Response

```json
{
  "status": "UP"
}
```

---

### ðŸ”¹ 5. **Authentication (JWT)**

**POST** `/auth/login`

#### ðŸ”¸ Body

```json
{
  "username": "admin",
  "password": "secret"
}
```

#### ðŸ”¸ Response

```json
{
  "token": "eyJhbGciOiJIUzI1..."
}
```

> All subsequent requests must include:

```
Authorization: Bearer <token>
```

